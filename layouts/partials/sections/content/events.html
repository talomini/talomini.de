{{ with $.Site.GetPage "events" }}

{{ $events := (slice) }}
{{ range (.Pages.ByParam "eventDate") }}
{{ if (time .Params.EventDate).After ((time (dateFormat "2006-01-02" now)).AddDate 0 0 -1) }}
{{ $events = $events | append . }}
{{ end }}
{{ end }}

{{ if gt (len $events) 0 }}

{{ partial "sections/content/title.html" . }}

<div class="container col-md-offset-2">
  <div class="row">
    {{ range $events }}
    <div class="event">
      <div class="event-date">
        <span class="month">
          {{ partial "month.html" (time .Params.EventDate) }}</span>
        <span class="year">{{ dateFormat "2006" (time .Params.EventDate) }}</span>
      </div>

      <div class="event-title">
        <a class="title" href="{{ .Permalink }}">{{ .Title }}</a>
        <div class="meta">{{ .Params.EventDate }}</div>
      </div>
    </div>
    {{ end }}
  </div>
</div>
{{ end }}

{{ end }}

